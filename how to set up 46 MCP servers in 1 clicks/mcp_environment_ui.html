<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Environment Variables Configuration UI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .category {
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .category-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .category-header:hover {
            background: #e9ecef;
        }

        .category-header h3 {
            color: #495057;
            font-size: 1.3em;
        }

        .toggle-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }

        .category.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }

        .category-content {
            padding: 20px;
            display: block;
        }

        .category.collapsed .category-content {
            display: none;
        }

        .env-var {
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .env-var-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .env-var-name {
            font-weight: bold;
            color: #495057;
            font-size: 1.1em;
        }

        .required-badge {
            background: #dc3545;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        .optional-badge {
            background: #6c757d;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }

        .env-var-description {
            color: #6c757d;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .env-var-url {
            margin-bottom: 15px;
        }

        .env-var-url a {
            color: #007bff;
            text-decoration: none;
            font-size: 0.9em;
        }

        .env-var-url a:hover {
            text-decoration: underline;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .form-control {
            flex: 1;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
        }

        .toggle-visibility {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-visibility:hover {
            background: #5a6268;
        }

        .actions {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #117a8b;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .status-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #28a745);
            width: 0%;
            transition: width 0.3s;
        }

        .action-grid {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-item {
            text-align: center;
            flex: 1;
            min-width: 180px;
        }

        .action-item .btn {
            width: 100%;
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            min-height: 80px;
            justify-content: center;
        }

        .btn-icon {
            font-size: 1.2em;
            margin-bottom: 3px;
        }

        .btn-text {
            font-size: 1.1em;
            font-weight: bold;
        }

        .btn-subtitle {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .platform-info {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .platform-tag {
            background: #f8f9fa;
            color: #495057;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            border: 1px solid #dee2e6;
        }

        .platform-desc {
            font-size: 0.8em;
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .action-grid {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-item {
                min-width: auto;
            }
            
            .action-item .btn {
                min-height: 70px;
                padding: 12px 8px;
            }
            
            .btn-icon {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ MCP Environment Configuration</h1>
            <p>Intuitive graphical interface for easy configuration of environment variables for 46 MCP servers</p>
        </div>

        <div class="content">
            <div id="categories-container">
                <!-- Dynamically generated category content -->
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="status-message" id="status-message"></div>
        </div>

        <div class="actions">
            <div class="action-grid">
                <div class="action-item">
                    <button class="btn btn-primary" onclick="loadFromFile()">
                        <div class="btn-icon">üìÇ</div>
                        <div class="btn-text">Load Config</div>
                        <div class="btn-subtitle">Load Your JSON file</div>
                    </button>
                    <div class="platform-info">
                        <span class="platform-tag">üñ•Ô∏è Universal</span>
                        <span class="platform-desc">Edit together</span>
                    </div>
                </div>
                
                <div class="action-item">
                    <button class="btn btn-success" onclick="saveToFile()">
                        <div class="btn-icon">üíæ</div>
                        <div class="btn-text">Save Config</div>
                        <div class="btn-subtitle">Save as JSON file</div>
                    </button>
                    <div class="platform-info">
                        <span class="platform-tag">üìù VS Code</span>
                        <span class="platform-desc">IDE configuration file</span>
                    </div>
                </div>
                
                <div class="action-item">
                    <button class="btn btn-info" onclick="generateScripts()">
                        <div class="btn-icon">üìú</div>
                        <div class="btn-text">Generate Script</div>
                        <div class="btn-subtitle">For Powershll user</div>
                    </button>
                    <div class="platform-info">
                        <span class="platform-tag">ü™ü Windows</span>
                        <span class="platform-desc">PowerShell (.ps1)</span>
                    </div>
                </div>
                
                <div class="action-item">
                    <button class="btn btn-warning" onclick="exportConfig()">
                        <div class="btn-icon">üì§</div>
                        <div class="btn-text">Export Settings</div>
                        <div class="btn-subtitle">Export Shell script</div>
                    </button>
                    <div class="platform-info">
                        <span class="platform-tag">üçé Mac/Linux</span>
                        <span class="platform-desc">Bash (.sh)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Environment Variables Configuration Data
        const envVarsConfig = {
            "AI Services": {
                "OPENAI_API_KEY": {
                    description: "OpenAI API Key",
                    url: "https://platform.openai.com/api-keys",
                    required_for: ["openai"],
                    sensitive: true
                },
                "ANTHROPIC_API_KEY": {
                    description: "Anthropic API Key",
                    url: "https://console.anthropic.com/",
                    required_for: ["anthropic"],
                    sensitive: true
                },
                "HUGGINGFACE_API_TOKEN": {
                    description: "HuggingFace API Token",
                    url: "https://huggingface.co/settings/tokens",
                    required_for: ["huggingface"],
                    sensitive: true
                },
                "LLAMA_CLOUD_API_KEY": {
                    description: "LlamaCloud API Key",
                    url: "https://cloud.llamaindex.ai/",
                    required_for: ["llamacloud"],
                    sensitive: true
                }
            },
            "Database Services": {
                "POSTGRES_CONNECTION_STRING": {
                    description: "PostgreSQL Connection String",
                    url: "https://www.postgresql.org/docs/current/libpq-connect.html",
                    required_for: ["postgres"],
                    sensitive: true,
                    example: "postgresql://username:password@localhost:5432/database"
                },
                "MONGODB_URI": {
                    description: "MongoDB Connection URI",
                    url: "https://docs.mongodb.com/manual/reference/connection-string/",
                    required_for: ["mongodb"],
                    sensitive: true,
                    example: "mongodb://localhost:27017/database"
                },
                "REDIS_URL": {
                    description: "Redis Connection URL",
                    url: "https://redis.io/docs/manual/clients/",
                    required_for: ["redis"],
                    sensitive: true,
                    example: "redis://localhost:6379"
                }
            },
            "Cloud Services": {
                "AWS_ACCESS_KEY_ID": {
                    description: "AWS Access Key ID",
                    url: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html",
                    required_for: ["aws"],
                    sensitive: true
                },
                "AWS_SECRET_ACCESS_KEY": {
                    description: "AWS Secret Access Key",
                    url: "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html",
                    required_for: ["aws"],
                    sensitive: true
                },
                "GOOGLE_DRIVE_CREDENTIALS": {
                    description: "Google Drive Credentials JSON File Path",
                    url: "https://developers.google.com/drive/api/v3/quickstart",
                    required_for: ["google_drive"],
                    sensitive: true,
                    example: "C:\\path\\to\\credentials.json"
                }
            },
            "Development Tools": {
                "GITHUB_PERSONAL_ACCESS_TOKEN": {
                    description: "GitHub Personal Access Token",
                    url: "https://github.com/settings/tokens",
                    required_for: ["github"],
                    sensitive: true
                },
                "GITLAB_PERSONAL_ACCESS_TOKEN": {
                    description: "GitLab Personal Access Token",
                    url: "https://gitlab.com/-/profile/personal_access_tokens",
                    required_for: ["gitlab"],
                    sensitive: true
                },
                "LINEAR_API_KEY": {
                    description: "Linear API Key",
                    url: "https://linear.app/changelog/2025-05-01-mcp",
                    required_for: ["linear"],
                    sensitive: true
                }
            },
            "Communication": {
                "SLACK_BOT_TOKEN": {
                    description: "Slack Bot Token",
                    url: "https://api.slack.com/apps",
                    required_for: ["slack"],
                    sensitive: true
                },
                "DISCORD_BOT_TOKEN": {
                    description: "Discord Bot Token",
                    url: "https://discord.com/developers/applications",
                    required_for: ["discord"],
                    sensitive: true
                }
            },
            "Other Services": {
                "NOTION_API_KEY": {
                    description: "Notion API Key",
                    url: "https://www.notion.so/my-integrations",
                    required_for: ["notion"],
                    sensitive: true
                },
                "SPOTIFY_CLIENT_ID": {
                    description: "Spotify Client ID",
                    url: "https://developer.spotify.com/dashboard/applications",
                    required_for: ["spotify"],
                    sensitive: false
                },
                "SPOTIFY_CLIENT_SECRET": {
                    description: "Spotify Client Secret",
                    url: "https://developer.spotify.com/dashboard/applications",
                    required_for: ["spotify"],
                    sensitive: true
                },
                "CHROMA_HOST": {
                    description: "Chroma Server Host Address",
                    url: "https://docs.trychroma.com/",
                    required_for: ["chroma"],
                    sensitive: false,
                    default: "localhost"
                },
                "CHROMA_PORT": {
                    description: "Chroma Server Port",
                    url: "https://docs.trychroma.com/",
                    required_for: ["chroma"],
                    sensitive: false,
                    default: "8000"
                }
            }
        };

        let envValues = {};

        // Initialize Page
        function initializePage() {
            const container = document.getElementById('categories-container');
            
            Object.keys(envVarsConfig).forEach(category => {
                const categoryDiv = createCategorySection(category, envVarsConfig[category]);
                container.appendChild(categoryDiv);
            });
            
            updateProgress();
        }

        // Create Category Section
        function createCategorySection(categoryName, vars) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'category';
            
            const headerDiv = document.createElement('div');
            headerDiv.className = 'category-header';
            headerDiv.onclick = () => toggleCategory(categoryDiv);
            
            headerDiv.innerHTML = `
                <h3>${categoryName}</h3>
                <span class="toggle-icon">‚ñº</span>
            `;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'category-content';
            
            Object.keys(vars).forEach(varName => {
                const varDiv = createEnvVarSection(varName, vars[varName]);
                contentDiv.appendChild(varDiv);
            });
            
            categoryDiv.appendChild(headerDiv);
            categoryDiv.appendChild(contentDiv);
            
            return categoryDiv;
        }

        // Create Environment Variable Section
        function createEnvVarSection(varName, config) {
            const varDiv = document.createElement('div');
            varDiv.className = 'env-var';
            
            const isRequired = config.required_for && config.required_for.length > 0;
            const badge = isRequired ? 
                '<span class="required-badge">Required</span>' : 
                '<span class="optional-badge">Optional</span>';
            
            const example = config.example ? `<br><small>Example: ${config.example}</small>` : '';
            const defaultValue = config.default ? config.default : '';
            
            varDiv.innerHTML = `
                <div class="env-var-header">
                    <span class="env-var-name">${varName}</span>
                    ${badge}
                </div>
                <div class="env-var-description">
                    ${config.description}${example}
                    <br><small>Used by servers: ${config.required_for ? config.required_for.join(', ') : 'Universal'}</small>
                </div>
                <div class="env-var-url">
                    <a href="${config.url}" target="_blank">üìñ How to get</a>
                </div>
                <div class="input-group">
                    <input type="${config.sensitive ? 'password' : 'text'}" 
                           class="form-control" 
                           id="${varName}" 
                           placeholder="Enter ${varName}" 
                           value="${defaultValue}"
                           oninput="updateEnvValue('${varName}', this.value)">
                    ${config.sensitive ? `<button type="button" class="toggle-visibility" onclick="togglePasswordVisibility('${varName}')">üëÅÔ∏è</button>` : ''}
                </div>
            `;
            
            return varDiv;
        }

        // Toggle Category Expand/Collapse
        function toggleCategory(categoryDiv) {
            categoryDiv.classList.toggle('collapsed');
        }

        // Toggle Password Visibility
        function togglePasswordVisibility(varName) {
            const input = document.getElementById(varName);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        // Update Environment Variable Value
        function updateEnvValue(varName, value) {
            envValues[varName] = value;
            updateProgress();
        }

        // Update Progress Bar
        function updateProgress() {
            const totalVars = Object.keys(envVarsConfig).reduce((total, category) => {
                return total + Object.keys(envVarsConfig[category]).length;
            }, 0);
            
            const filledVars = Object.keys(envValues).filter(key => envValues[key] && envValues[key].trim() !== '').length;
            const progress = (filledVars / totalVars) * 100;
            
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        // Show Status Message
        function showStatus(message, isError = false) {
            const statusDiv = document.getElementById('status-message');
            statusDiv.textContent = message;
            statusDiv.className = `status-message ${isError ? 'status-error' : 'status-success'}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }

        // Load Configuration File
        function loadFromFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const config = JSON.parse(e.target.result);
                            
                            // Load environment variable values
                            Object.keys(config).forEach(key => {
                                const input = document.getElementById(key);
                                if (input) {
                                    input.value = config[key];
                                    updateEnvValue(key, config[key]);
                                }
                            });
                            
                            showStatus('‚úÖ Configuration loaded successfully!');
                        } catch (error) {
                            showStatus('‚ùå Invalid configuration file format!', true);
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // Save Configuration to File
        function saveToFile() {
            const config = {};
            Object.keys(envValues).forEach(key => {
                if (envValues[key] && envValues[key].trim() !== '') {
                    config[key] = envValues[key];
                }
            });
            
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'mcp-environment-config.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showStatus('‚úÖ Configuration saved to file!');
        }

        // Generate Environment Variable Scripts
        function generateScripts() {
            const config = {};
            Object.keys(envValues).forEach(key => {
                if (envValues[key] && envValues[key].trim() !== '') {
                    config[key] = envValues[key];
                }
            });
            
            // Windows ÊâπÊ¨°Ê™î
            let batScript = '@echo off\n';
            batScript += 'echo Setting MCP Environment Variables...\n';
            Object.keys(config).forEach(key => {
                batScript += `set ${key}=${config[key]}\n`;
            });
            batScript += 'echo Environment variables set successfully!\n';
            
            // PowerShell ËÖ≥Êú¨
            let ps1Script = '# MCP Environment Variables Setup\n';
            ps1Script += 'Write-Host "Setting MCP Environment Variables..." -ForegroundColor Green\n';
            Object.keys(config).forEach(key => {
                ps1Script += `$env:${key} = "${config[key]}"\n`;
            });
            ps1Script += 'Write-Host "Environment variables set successfully!" -ForegroundColor Green\n';
            
            // Unix/Linux ËÖ≥Êú¨
            let shScript = '#!/bin/bash\n';
            shScript += 'echo "Setting MCP Environment Variables..."\n';
            Object.keys(config).forEach(key => {
                shScript += `export ${key}="${config[key]}"\n`;
            });
            shScript += 'echo "Environment variables set successfully!"\n';
            
            // ‰∏ãËºâËÖ≥Êú¨
            downloadScript('set_mcp_env.bat', batScript);
            downloadScript('set_mcp_env.ps1', ps1Script);
            downloadScript('set_mcp_env.sh', shScript);
            
            showStatus('‚úÖ Environment variable scripts generated and downloaded!');
        }

        // Download Script File
        function downloadScript(filename, content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Export Settings
        function exportConfig() {
            const config = {
                timestamp: new Date().toISOString(),
                environment_variables: {},
                statistics: {
                    total_variables: 0,
                    configured_variables: 0,
                    completion_percentage: 0
                }
            };
            
            Object.keys(envValues).forEach(key => {
                if (envValues[key] && envValues[key].trim() !== '') {
                    config.environment_variables[key] = envValues[key];
                }
            });
            
            const totalVars = Object.keys(envVarsConfig).reduce((total, category) => {
                return total + Object.keys(envVarsConfig[category]).length;
            }, 0);
            
            config.statistics.total_variables = totalVars;
            config.statistics.configured_variables = Object.keys(config.environment_variables).length;
            config.statistics.completion_percentage = Math.round((config.statistics.configured_variables / totalVars) * 100);
            
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `mcp-config-export-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showStatus('‚úÖ Settings exported!');
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>